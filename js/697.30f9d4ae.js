"use strict";(self["webpackChunkshoping_cart"]=self["webpackChunkshoping_cart"]||[]).push([[697],{7697:function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i(3396),r=i(7139),n=i(9242),a=i(237);const s={id:"login"},l={class:"container"},c=(0,o._)("img",{src:a,alt:"logo1"},null,-1),u=(0,o._)("h1",null,"Login",-1),h={class:"input-errors mb-3 text-center"},d={key:0},p=(0,o._)("label",{for:"phone"},"Phone Number",-1),f={class:"error-msg"},g=(0,o._)("div",{id:"recaptcha-container"},null,-1),m={key:1},v=(0,o._)("label",{for:"otp"},"Enter the verification code",-1),w={class:"error-msg"},$=(0,o._)("h4",null,"Login",-1);function y(e,t,i,a,y,_){const C=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("section",s,[(0,o._)("div",l,[(0,o.Wm)(C,{to:"/","aria-current":"page"},{default:(0,o.w5)((()=>[c])),_:1}),u,(0,o._)("h3",h,(0,r.zw)(y.errorCode),1),y.isVerificationCodeSent?((0,o.wg)(),(0,o.iD)("div",m,[v,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.otp.$model=t),id:"otp",placeholder:"Enter the verification code"},null,512),[[n.nr,e.v$.otp.$model]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.v$.otp.$errors,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"input-errors",key:t},[(0,o._)("div",w,(0,r.zw)(e.$message),1)])))),128)),(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>_.verifyPhoneNumber&&_.verifyPhoneNumber(...e))},"Verify")])):((0,o.wg)(),(0,o.iD)("div",d,[p,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.v$.phone.$model=t),maxlength:"13",id:"phone",placeholder:"+911234512345"},null,512),[[n.nr,e.v$.phone.$model]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.v$.phone.$errors,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"input-errors",key:t},[(0,o._)("div",f,(0,r.zw)(e.$message),1)])))),128)),g,(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>_.sendVerificationCode&&_.sendVerificationCode(...e)),type:"button"},"Send verification code")])),(0,o.Wm)(C,{to:"/login",class:"link"},{default:(0,o.w5)((()=>[$])),_:1})])])}i(7658);var _=i(6572),C=i(3053),b=i(9117),V=i(3854),k={name:"login",setup:()=>({v$:(0,C.Xw)()}),data(){return{phone:"",otp:"",isVerificationCodeSent:!1,confirmationResult:null,errorCode:"",recaptchaVerifier:null,auth:(0,V.v0)()}},validations(){return{phone:{required:b.BM.withMessage("* Please Enter Your Phone Number.",b.C1)},otp:{required:b.BM.withMessage("* Please Enter Your the verification code.",b.C1)}}},mounted(){let e=localStorage.getItem("Userdata");e&&this.$router.push({path:"/"}),this.auth.languageCode="en",this.recaptchaVerifier=new V.lI("recaptcha-container",{},this.auth),this.recaptchaVerifier.render().then((e=>{window.recaptchaWidgetId=e}))},methods:{async sendVerificationCode(){await this.v$.$validate(),(0,V.$g)(this.auth,this.phone,this.recaptchaVerifier).then((e=>{this.confirmationResult=e,_.Z.fire({icon:"success",title:"Sms Sent!"}),this.isVerificationCodeSent=!0})).catch((e=>{console.log(e.code,"code"),"auth/too-many-requests"==e.code?_.Z.fire({icon:"warning",title:"Too Many Attempts Try Later"}):_.Z.fire({icon:"error",title:"Sms Not Sent!"})}))},async verifyPhoneNumber(){await this.v$.$validate(),this.confirmationResult.confirm(this.otp).then((e=>{console.log(e,"result"),localStorage.setItem("Userdata",JSON.stringify(e.user.providerData[0])),_.Z.fire({icon:"success",title:"Registeration Successfull!"}),this.$router.push({path:"/"})})).catch((e=>{console.log(e)}))}}},S=i(89);const D=(0,S.Z)(k,[["render",y]]);var N=D}}]);
//# sourceMappingURL=697.30f9d4ae.js.map