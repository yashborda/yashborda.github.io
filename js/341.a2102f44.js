"use strict";(self["webpackChunkshoping_cart"]=self["webpackChunkshoping_cart"]||[]).push([[341],{8341:function(e,t,i){i.r(t),i.d(t,{default:function(){return D}});var o=i(3396),r=i(7139),n=i(9242),a=i(237);const s={id:"login"},l={class:"container"},c=(0,o._)("img",{src:a,alt:"logo1"},null,-1),u=(0,o._)("h1",null,"Login",-1),h={class:"input-errors mb-3 text-center"},d={key:0},p=(0,o._)("label",{for:"phone"},"Phone Number",-1),m={class:"error-msg"},f=(0,o._)("div",{id:"recaptcha-container"},null,-1),g={key:1},v=(0,o._)("label",{for:"otp"},"Enter the verification code",-1),w={class:"error-msg"},$=(0,o._)("h4",null,"Login",-1);function y(e,t,i,a,y,_){const b=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("section",s,[(0,o._)("div",l,[(0,o.Wm)(b,{to:"/","aria-current":"page"},{default:(0,o.w5)((()=>[c])),_:1}),u,(0,o._)("h3",h,(0,r.zw)(y.errorCode),1),y.isVerificationCodeSent?((0,o.wg)(),(0,o.iD)("div",g,[v,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.otp.$model=t),id:"otp",placeholder:"Enter the verification code"},null,512),[[n.nr,e.v$.otp.$model]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.v$.otp.$errors,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"input-errors",key:t},[(0,o._)("div",w,(0,r.zw)(e.$message),1)])))),128)),(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>_.verifyPhoneNumber&&_.verifyPhoneNumber(...e))},"Verify")])):((0,o.wg)(),(0,o.iD)("div",d,[p,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.v$.phone.$model=t),maxlength:"10",id:"phone",placeholder:"1234512345"},null,512),[[n.nr,e.v$.phone.$model]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.v$.phone.$errors,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"input-errors",key:t},[(0,o._)("div",m,(0,r.zw)(e.$message),1)])))),128)),f,(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>_.sendVerificationCode&&_.sendVerificationCode(...e)),type:"button"},"Send verification code")])),(0,o.Wm)(b,{to:"/login",class:"link"},{default:(0,o.w5)((()=>[$])),_:1})])])}i(7658);var _=i(6572),b=i(3053),C=i(9117),S=i(3854),V={name:"login",setup:()=>({v$:(0,b.Xw)()}),data(){return{phone:"",otp:"",isVerificationCodeSent:!1,confirmationResult:null,errorCode:"",recaptchaVerifier:null,auth:(0,S.v0)()}},validations(){return{phone:{required:C.BM.withMessage("* Please Enter Your Phone Number.",C.C1)},otp:{required:C.BM.withMessage("* Please Enter Your the verification code.",C.C1)}}},mounted(){let e=localStorage.getItem("Userdata");e&&this.$router.push({name:"Home"}),this.auth.languageCode="en",this.recaptchaVerifier=new S.lI("recaptcha-container",{},this.auth),this.recaptchaVerifier.render().then((e=>{window.recaptchaWidgetId=e}))},methods:{async sendVerificationCode(){await this.v$.$validate(),this.phoneNumber="+91"+this.phone,(0,S.$g)(this.auth,this.phoneNumber,this.recaptchaVerifier).then((e=>{this.confirmationResult=e,_.Z.fire({icon:"success",title:"Sms Sent!"}),this.isVerificationCodeSent=!0})).catch((e=>{console.log(e.code,"code"),"auth/too-many-requests"==e.code?_.Z.fire({icon:"warning",title:"Too Many Attempts Try Later"}):_.Z.fire({icon:"error",title:"Sms Not Sent!"})}))},async verifyPhoneNumber(){await this.v$.$validate(),this.confirmationResult.confirm(this.otp).then((e=>{console.log(e,"result"),localStorage.setItem("Userdata",JSON.stringify(e.user.providerData[0])),localStorage.setItem("isAuth",!0),_.Z.fire({icon:"success",title:"Registeration Successfull!"}),this.$router.push({name:"Home"})})).catch((e=>{console.log(e)}))}}},k=i(89);const N=(0,k.Z)(V,[["render",y]]);var D=N}}]);
//# sourceMappingURL=341.a2102f44.js.map